#include <iostream>
#include <conio.h>
#include <windows.h> 

using namespace std;

void setColor(int color) {
    SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), color);
}

bool manager::login() {
    persons* person = nullptr;

    // ðŸŽ¨ Setting colors
    setColor(11); // Light Cyan Color
    cout << endl;
    cout << "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—" << endl;
    setColor(14); // Yellow Color
    cout << "â•‘                                ðŸ” LOGIN PORTAL                                     â•‘" << endl;
    setColor(11);
    cout << "â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£" << endl;

    setColor(15); // White color for normal text
    cout << "â•‘ Please Enter Your User Name To Login:                                             â•‘" << endl;
    setColor(12); // Red Color for Warning
    cout << "â•‘ âš ï¸  WARNING: DO NOT USE SPACES IN YOUR NAME!                                      â•‘" << endl;
    
    setColor(15);
    cout << "â•‘ Or Enter Q To Return To Menu:                                                     â•‘" << endl;
    cout << "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•" << endl << endl;

    setColor(10); // Green Color
    cout << "ðŸ‘‰ Username: ";
    setColor(15);
    
    string name;
    cin >> name;

    if ((name == "q") || (name == "Q")) {
        return false;
    }

    setColor(11);
    cout << endl;
    cout << "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—" << endl;
    setColor(14);
    cout << "â•‘                                ðŸ”‘ PASSWORD ENTRY                                  â•‘" << endl;
    setColor(11);
    cout << "â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£" << endl;
    
    setColor(15);
    cout << "â•‘ Please Enter Your Password:                                                       â•‘" << endl;
    setColor(12);
    cout << "â•‘ âš ï¸  WARNING: DO NOT USE SPACES IN YOUR PASSWORD!                                  â•‘" << endl;
    setColor(15);
    cout << "â•‘ Or Enter Q To Return To Menu:                                                     â•‘" << endl;
    cout << "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•" << endl << endl;

    string password;
    char ch;
    
    setColor(13); // Magenta Color
    cout << "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—" << endl;
    cout << "â•‘ ðŸ”‘ Password: ";
    setColor(15);

    while (true) {
        ch = _getch();
        if (ch == '\r') {
            break;
        } else if (ch == '\b' && !password.empty()) {
            cout << "\b \b";
            password.pop_back();
        } else if (ch != '\b') {
            cout << '*';
            password += ch;
        }
    }

    setColor(13);
    cout << " â•‘" << endl;
    cout << "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•" << endl << endl;

    setColor(15); // Reset to normal white

    if ((password == "q") || (password == "Q")) {
        return false;
    }

    person = storage(name, password);
    if (person != nullptr) {
        play(person);
        options(person);
        return false;
    }

    return false;
}
